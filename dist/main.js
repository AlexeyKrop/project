(()=>{"use strict";const e=e=>{document.querySelectorAll(".form-btn").forEach((t=>{t.disabled=e}))};setInterval((e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds");function r(e){return e<10&&(e="0"+e),e}(()=>{let n=(()=>{const r=(new Date).getTime(),n=(new Date(e).getTime()-r)/1e3;if(!(n<0))return{timeRemaining:n,seconds:Math.floor(n%60),minutes:Math.floor(n/60%60),hours:Math.floor(n/3600)};clearInterval(void 0),t.textContent="00",t.style.color="red",o.textContent="00",o.style.color="red",l.textContent="00",l.style.color="red"})();t.textContent=r(n.hours),o.textContent=r(n.minutes),l.textContent=r(n.seconds)})()}),1e3,"07 april 2021"),(()=>{let e=document.querySelector("main>a>img");document.querySelectorAll("menu>ul>li>a").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})),e.addEventListener("click",(t=>{t.preventDefault(),e=document.querySelector("main>a");const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})}))})(),(()=>{const e=document.querySelector("menu");document.querySelector("body").addEventListener("click",(t=>{let o=t.target;o.closest(".menu")?e.classList.toggle("active-menu"):!o.closest("body")||o.matches("menu")||o.matches("li")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=document.querySelector(".popup-content");let l,r=0;const n=()=>{r+=1.5,l=requestAnimationFrame(n),o.style.position="absolute",o.style.left=8*r+"px",r>69&&cancelAnimationFrame(l),document.documentElement.clientWidth<768&&(cancelAnimationFrame(l),o.style.left=document.documentElement.clientWidth/4+"px")};e.forEach((e=>{e.addEventListener("click",(function(){t.style.display="block",n()}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")?(t.style.display="none",r=0):(o=o.closest(".popup-content"),o||(t.style.display="none",r=0))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-tab"),o=e.querySelectorAll(".service-header-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l.classList.contains("service-header-tab")&&o.forEach(((e,r)=>{var n;l===e&&(n=r,t.forEach(((e,l)=>{n===l?(o[l].classList.add("active"),t[l].classList.remove("d-none")):(o[l].classList.remove("active"),t[l].classList.add("d-none"))})))}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item");document.querySelectorAll(".portfolio-btn");let o,l=0,r=document.querySelector(".portfolio-dots");(()=>{for(let e=0;e<t.length;e++){let e=document.createElement("li");e.classList.add("dot"),r.append(e)}})();const n=document.querySelectorAll(".dot"),c=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},s=()=>{c(t,l,"portfolio-item-active"),c(n,l,"dot-active"),l++,l>=t.length&&(l=0),a(t,l,"portfolio-item-active"),a(n,l,"dot-active")},u=(e=3e3)=>{o=setInterval(s,e)};e.addEventListener("click",(e=>{e.preventDefault();let o=e.target;o.matches("#arrow-left, #arrow-right, .dot")&&(c(t,l,"portfolio-item-active"),c(n,l,"dot-active"),o.matches("#arrow-left")?(l--,l<0&&(l=t.length-1)):o.matches("#arrow-right")?(l++,l>=t.length&&(l=0)):o.matches(".dot")&&n.forEach(((e,t)=>{o===e&&(l=t)})),a(t,l,"portfolio-item-active"),a(n,l,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(2e3)})(),(()=>{const e=document.getElementById("command");let t;e.addEventListener("mouseover",(e=>{let o=e.target;o.matches("img")&&(t=o.src,o.src=o.dataset.img,o.dataset.img=t)})),e.addEventListener("mouseout",(e=>{let o=e.target;o.matches("img")&&(t=o.src,o.src=o.dataset.img,o.dataset.img=t)}))})(),document.querySelectorAll("form").forEach((t=>{t.addEventListener("input",(t=>{let o=t.target;"Ваше имя"===o.placeholder?o.value=o.value.replace(/[^А-Яа-яЁё\ ]/,""):"Ваше сообщение"===o.placeholder?o.value=o.value.replace(/[^А-Яа-яЁё0-9\.\,\!\?\-\:]/,""):"E-mail"===o.placeholder||"Ваш E-mail"===o.placeholder?o.value=o.value.replace(/[^A-Za-z\!.@_~\-'*]/,""):"Номер телефона"!==o.placeholder&&"Ваш номер телефона"!==o.placeholder||(function(e,t="+7 (___) ___-__-__"){const o=document.querySelectorAll(e);function l(e){const o=e.keyCode,l=t,r=l.replace(/\D/g,""),n=this.value.replace(/\D/g,"");let c=0,a=l.replace(/[_\d]/g,(function(e){return c<n.length?n.charAt(c++)||r.charAt(c):e}));c=a.indexOf("_"),-1!==c&&(a=a.slice(0,c));let s=l.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");s=new RegExp("^"+s+"$"),(!s.test(this.value)||this.value.length<5||o>47&&o<58)&&(this.value=a),"blur"===e.type&&this.value.length<5&&(this.value="")}for(const e of o)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)}(".form-phone"),18===o.value.length&&(o.style.border="2px solid green",e(!1)))}))})),document.querySelectorAll("form").forEach((t=>{t.addEventListener("focusout",(t=>{let o=t.target;"Ваше имя"===o.placeholder?(o.value=o.value.trim().replace(/[^\s\da-zа-я]/gi,"").replace(/\s+/g," "),""!==o.value&&(o.value=o.value.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1)})).join(" ")),o.value.search(/[^A-Za-z]/)&&(o.value="")):"E-mail"===o.placeholder||"Ваш E-mail"===o.placeholder?o.value=o.value.replace(/[^\w\s+\@\ \-]|(.)(?=\1)/gi,""):"Номер телефона"!==o.placeholder&&"Ваш номер телефона"!==o.placeholder||18!==o.value.length&&(o.style.border="2px solid red",alert("Введите корректный номер телефона"),e(!0))}))})),(e=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),n=document.querySelector(".calc-day"),c=document.getElementById("total");t.addEventListener("input",(e=>{let t=e.target;t.matches("input")&&(t.value=t.value.replace(/\D+/,""))})),t.addEventListener("change",(t=>{let a=t.target;(a.matches("input")||a.matches("select"))&&(()=>{let t=0,a=1,s=1,u=o.options[o.selectedIndex].value,i=+l.value;""===u&&(n.value="",l.value="",r.value="",c.textContent=0),n.value&&n.value<5?a*=2:n.value&&n.value<10&&(a*=1.5),r.value>1&&(s+=(r.value-1)/10),i&&u&&(t=u*i*e*a*s),t>0&&function(e,t){let o;l.value<100?o=100:l.value>=100&&(o=4e3);let r=0,n=Math.round(.01/(e/o)),c=setInterval((()=>{r+=o,r>=Math.round(e)&&clearInterval(c),t.textContent=r}),n)}(t,c)})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");t.style.color="red";const o=document.createElement("img");o.src="./images/load.gif",t.append(o);const l=document.querySelectorAll("input"),r=document.querySelector(".popup");e.forEach((e=>{e.addEventListener("submit",(o=>{o.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const n=new FormData(e);let c={};n.forEach(((e,t)=>{c[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((o=>{if(200!==o.status)throw new Error("status network not 200");t.textContent="Спасибо...Мы скоро с вами свяжемся",l.forEach((e=>{e.value=""})),setTimeout((()=>{t.textContent=""}),2e3),e.matches("#form3")&&setTimeout((()=>{r.style.display="none"}),2e3)})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)}))}))}))})()})();